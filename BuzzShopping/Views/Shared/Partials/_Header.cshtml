<header class="header bg-white shadow-sm sticky top-0 z-50">
    <nav class="nav mx-auto max-w-7xl px-4 sm:px-6 lg:px-8">
        <div class="nav-container flex h-16 items-center justify-between">
            <!-- Logo - Left -->
            <div class="logo-container flex items-center">
                <a asp-controller="Home" asp-action="Index" class="logo-link text-xl font-bold text-gray-900 hover:text-slate-700 flex items-center">
                    <svg xmlns="http://www.w3.org/2000/svg" class="logo-icon h-6 w-6 mr-2 text-slate-700" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 11V7a4 4 0 00-8 0v4M5 9h14l1 12H4L5 9z" />
                    </svg>
                    BuzzShopping
                </a>
            </div>

            <!-- Search Field - Center -->
            <div class="search-container">
                <form asp-controller="Product" asp-action="Search" method="get" class="search-form">
                    <div class="search-wrapper">
                        <input type="text" name="query" placeholder="Sök produkter..." class="search-input">
                        <span class="search-icon">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-gray-400" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" />
                            </svg>
                        </span>
                    </div>
                </form>
            </div>

            <!-- Icons - Right -->
            <div class="icons-container">
                <!-- Shopping Cart -->
                <a asp-controller="Cart" asp-action="Index" class="cart-icon relative flex text-gray-700 hover:text-slate-700 transition">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 3h2l.4 2M7 13h10l4-8H5.4M7 13L5.4 5M5 20a2 2 0 100-4 2 2 0 000 4zm10 0a2 2 0 100-4 2 2 0 000 4z" />
                    </svg>
                    <span class="cart-badge absolute -top-2 -right-2 bg-slate-700 text-white text-xs rounded-full h-5 w-5 flex items-center justify-center">@ViewBag.productsNumber</span>
                </a>

                <!-- User -->
                @if (User.Identity != null && User.Identity.IsAuthenticated)
                {
                    var userName = User.Identity.Name ?? "User";
                    <div class="user-container relative group">
                        <button class="user-button flex items-center gap-2 text-gray-700 hover:text-slate-700">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z" />
                            </svg>
                            <span class="user-name text-sm">@userName</span>
                        </button>
                        <div class="user-dropdown absolute right-0 mt-2 w-40 bg-white border rounded shadow-md hidden group-hover:block z-50">
                            <a asp-controller="Account" asp-action="Profile" class="dropdown-item block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100">Profil</a>
                            <a asp-controller="Dashboard" asp-action="Dashboard" class="dropdown-item block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100">Dashboard</a>
                            <form asp-controller="Account" asp-action="Logout" method="post" class="logout-form">
                                <button type="submit" class="logout-button w-full text-left px-4 py-2 text-sm text-red-600 hover:bg-red-100">Logga ut</button>
                            </form>
                        </div>
                    </div>
                }
                else
                {
                    <a asp-controller="Account" asp-action="Login" class="p-2 text-gray-700 hover:text-slate-700">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z" />
                        </svg>
                    </a>
                }
            </div>

            <!-- Hamburger menu -->
            <div class="hamburger-container">
                <button class="hamburger-button" aria-controls="mobile-menu" aria-expanded="false">
                    <span class="sr-only">Öppna meny</span>
                    <svg class="hamburger-icon block h-6 w-6" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16" />
                    </svg>
                    <svg class="close-icon hidden h-6 w-6" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
                    </svg>
                </button>
            </div>
        </div>

        <!-- Mobile menu -->
        <div class="mobile-menu hidden" id="mobile-menu">
            <div class="mobile-menu-content space-y-1 px-2 pt-2 pb-3">
                <form asp-controller="Product" asp-action="Search" method="get" class="mobile-search-form mb-3">
                    <div class="mobile-search-container relative">
                        <div class="mobile-search-icon absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-gray-400" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" />
                            </svg>
                        </div>
                        <input type="text" name="query" placeholder="Sök produkter..."
                               class="mobile-search-input block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-slate-500 focus:outline-none text-sm">
                    </div>
                </form>
                <a asp-controller="Cart" asp-action="Index" class="mobile-menu-item block px-3 py-2 rounded-md text-base font-medium text-gray-900 hover:bg-gray-100">Varukorg</a>
                @if (User.Identity != null && User.Identity.IsAuthenticated)
                {
                    <a asp-controller="Account" asp-action="Profile" class="mobile-menu-item block px-3 py-2 rounded-md text-base font-medium text-gray-900 hover:bg-gray-100">Profil</a>
                    <a asp-controller="Dashboard" asp-action="Dashboard" class="dropdown-item block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100">Dashboard</a>
                    <form asp-controller="Account" asp-action="Logout" method="post" class="mobile-logout-form">
                        <button type="submit" class="mobile-logout-button w-full text-left px-3 py-2 rounded-md text-base font-medium text-red-600 hover:bg-red-100">
                            Logga ut
                        </button>
                    </form>
                }
                else
                {
                    <a asp-controller="Account" asp-action="Login" class="mobile-menu-item block px-3 py-2 rounded-md text-base font-medium text-gray-900 hover:bg-gray-100">Logga in</a>
                }
            </div>
        </div>
    </nav>
</header>

<link rel="stylesheet" href="styles.css">
<script src="site.js"></script>